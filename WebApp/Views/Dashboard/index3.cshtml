@{
    ViewData["AppContentNone"] = "true";
    ViewBag.Title = "Power BI Dashboard";
}

<style>
    .logo-slider .item {
        background-color: #fff;
        box-shadow: 0 4px 5px #cacaca;
        border-radius: 8px;
        padding: 15px;
        border: solid 2px rgb(65, 64, 64);
        cursor: pointer;
        transition: .5s ease;
        opacity: 0.3;
    }

    .logo-slider .slick-slide {
        margin: 15px;
    }

    .slick-dots li.slick-active button:before {
        color: #007aff;
    }

    .slick-dots li button:before {
        font-size: 12px;
    }

    .slick-next:before,
    .slick-prev:before {
        color: #007aff;
        font-size: 24px;
    }

    .item:hover {
        display: block;
    }

    .item.active {
        border: 2px solid #007aff;
        opacity: 1;
    }

    .slider-for {
        display: none;
    }

    .card-link {
        text-decoration: none;
        color: inherit;
    }

    .logo-slider .item:hover {
        color: rgb(65, 64, 64);
        opacity: 1;
        border: solid 2px rgb(65, 64, 64);
    }

    .card-link .panel:hover {
        background-color: #007aff;
        color: white;
    }

    .logo-slider .item img {
        transition: all .5s ease-in-out;
        width: 150px;
        height: 150px;
    }

    .logo-slider .item:hover img {
        transform: scale(1.2)
    }
</style>

<div class="alert alert-primary text-left pt-4" role="alert"><h4>Please Select The Products</h4></div>

<div class="row text-center" data-step="3"
     data-intro="Another step. Intro.js main features!"
     data-hint="Another step. Intro.js main features!"
     data-hintPosition="top-middle"
     data-position="bottom-right-aligned">


    <div class="container">
        <h1 class="text-center">Products</h1> <hr>
        <!-- Tab Navigation -->
        <ul class="nav nav-tabs" id="productTab" role="tablist">
            @foreach (var group in Model)
            {
                <li class="nav-item">
                    <a class="nav-link @((group.Type == Model.First().Type) ? "active" : "")"
                       id="tab-@group.Type"
                       data-toggle="tab"
                       href="#type-@group.Type"
                       role="tab"
                       aria-controls="type-@group.Type"
                       aria-selected="@(group.Type == Model.First().Type)">
                        Type @group.Type
                    </a>
                </li>
            }
        </ul>


        <div class="logo-slider">
            <div class="item" data-id="1">
                <img src="~/assets/images/product/massey_ferguson.png" alt="Massey Ferguson" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>Massey Ferguson</b></h5>
            </div>
            <div class="item" data-id="2">
                <img src="~/assets/images/product/canycom.png" alt="Canycom" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>Canycom</b></h5>
            </div>
            
            @* <div class="item" data-id="2">
                <img src="~/assets/images/product/kubota.png" alt="Kubota" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>Kubota</b></h5>
            </div>
            <div class="item" data-id="4">
                <img src="~/assets/images/product/kubota.png" alt="Perkins" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>Perkins</b></h5>
            </div>
            <div class="item" data-id="5">
                <img src="~/assets/images/product/kubota.png" alt="Toyota" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>Toyota</b></h5>
            </div>
            <div class="item" data-id="6">
                <img src="~/assets/images/product/kubota.png" alt="BT Raymond" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>BT Raymond</b></h5>
            </div>
            <div class="item" data-id="7">
                <img src="~/assets/images/product/kubota.png" alt="HSC Cranes" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>HSC Cranes</b></h5>
            </div>
            <div class="item" data-id="8">
                <img src="~/assets/images/product/kubota.png" alt="Link-Belt Crenes" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>Link-Belt Crenes</b></h5>
            </div>
            <div class="item" data-id="9">
                <img src="~/assets/images/product/jlg.png" alt="JLG" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>JLG</b></h5>
            </div>
            <div class="item" data-id="10">
                <img src="~/assets/images/product/kubota.png" alt="Ingersoll-Rand" class="img-fluid mx-auto" />
                <h5 class="m-b-5"><b>Ingersoll-Rand</b></h5>
            </div> *@
        </div>

        <div class="slider-for mt-5"></div>

    </div>
    @section Scripts {
        <script>
            $(document).ready(function () {
                $(".logo-slider").slick({
                    slidesToShow: 2,
                    slidesToScroll: 1,
                    dots: true,
                    arrows: true,
                    centerMode: false,
                    focusOnSelect: true,
                    asNavFor: ".slider-for",
                    responsive: [
                        {
                            breakpoint: 1024,
                            settings: {
                                slidesToShow: 2,
                                slidesToScroll: 1,
                                infinite: true,
                                dots: true
                            }
                        },
                        {
                            breakpoint: 600,
                            settings: {
                                slidesToShow: 1,
                                slidesToScroll: 1,
                                dots: false
                            }
                        }
                    ]
                });

                const commonMenuData = [
                    {
                        url: 'http://10.0.10.74:9590/moodle/login/index.php?',
                        icon: "fa-book-open-reader",
                        text: "Application Handbook",
                        target: "_blank"
                    },
                ];

                const menuData = {
                    1: [
                        // {
                        //     url: '@Url.Action("OCC", "Embed")/calculator',
                        //     icon: "fa-calculator",
                        //     text: "Productivity Calculator Unit",
                        //     target: "_self"
                        // },
                        {
                            url: '@Url.Action("OCC", "Embed")/mf',
                            icon: "fa-tractor",
                            text: "OOC Tractor Massey Ferguson",
                            target: "_self"
                        },
                        {
                            url: '@Url.Action("", "ProductSpec", new { type = "Mf" })',
                            icon: "fa-list",
                            text: "Product Unit Specification",
                            target: "_self"
                        },
                        {
                            url: '@Url.Action("", "Comparison", new { type = "Mf" })',
                            icon: "fa-repeat",
                            text: "Product Unit Comparison",
                            target: "_self"
                        },
                        {
                            url: '@Url.Action("", "ImplementCompability")',
                            icon: "fa-folder-open",
                            text: "Implement Compability",
                            target: "_self"
                        },
                        ...commonMenuData
                    ],
                    2: [
                        {
                            url: '@Url.Action("OCC", "Embed")/canycom',
                            icon: "fa-tractor",
                            text: "OOC Tractor Canycom",
                            target: "_self"
                        },
                        {
                            url: '@Url.Action("", "ProductSpec", new { type = "Cannycom" })',
                            icon: "fa-list",
                            text: "Product Unit Specification",
                            target: "_self"
                        },
                        {
                            url: '@Url.Action("", "Comparison", new { type = "Cannycom" })',
                            icon: "fa-repeat",
                            text: "Product Unit Comparison",
                            target: "_self"
                        },
                        ...commonMenuData
                    ],
                };

                // AfterChange event to ensure the active class remains consistent
                $('.logo-slider').on('afterChange', function (event, slick, currentSlide) {
                    const currentElement = $(slick.$slides[currentSlide]).find('.item');
                    const id = currentElement.data('id');
                    const items = menuData[id] || [];
                    const content = items.map(item => `
                                        <div class="col-md-3 mb-4">
                                            <a href="${item.url}" class="card-link" target="${item.target}">
                                                <div class="card">
                                                    <div class="card-body text-center">
                                                        <i class="fa ${item.icon} fa-5x text-muted mb-4"></i>
                                                        <h5 class="card-title"><b>${item.text}</b></h5>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    `).join('');
                    $('.slider-for').html(`<div class="row">${content}</div>`).show();

                    // Add red border to active item
                    $('.logo-slider .item').removeClass('active');
                    currentElement.addClass('active');


                    // Scroll to slider-for
                    setTimeout(function () {
                        $('html, body').animate({
                            scrollTop: $('.slider-for').offset().top
                        }, 500);
                    }, 100);
                });

                $(".slider-for").slick({
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    arrows: false,
                    fade: true,
                    asNavFor: ".logo-slider",
                });
            });
        </script>
    }
